{
  "author": {
    "name": "Bryan Hughes",
    "email": "bhughes@appcelerator.com"
  },
  "name": "titanium-code-processor",
  "description": "A code processing tool for Titanium Mobile",
  "version": "0.3.2",
  "homepage": "https://github.com/appcelerator/titanium-code-processor",
  "repository": {
    "type": "git",
    "url": "https://github.com/appcelerator/titanium-code-processor.git"
  },
  "scripts": {
    "test": "node tests/bin/tests"
  },
  "main": "lib/CodeProcessor.js",
  "bin": {
    "titanium-code-processor": "bin/codeprocessor"
  },
  "dependencies": {
    "uglify-js": "2.x.x",
    "wrench": "1.x.x",
    "nomnom": "1.x.x",
    "winston": "0.6.x",
    "async": "0.1.x",
    "xml2js": "0.2.x",
    "cli-table": "0.2.x",
    "node-appc": "0.1.x",
    "mu2": "0.5.x"
  },
  "engine": {
    "node": ">=0.8"
  },
  "readme": "Titanium Code Processor\n=======================\n\nThe Titanium Code Processor is a tool for analyzing JavaScript code in\n[Titanium Mobile](https://github.com/appcelerator/titanium_mobile) projects. It\nprovide a wide variety of useful functionality, including runtime error detection,\nTitanium API deprecation warnings, platform specific API validation, and more.\nIt is built using a robust plugin solution that makes it relatively easy to add\nnew analyses to the code processor. The tool can be used as a stand-alone binary,\nused as part of the Titanium CLI, or incorporated as a library into other node.js\napplications (See the API documentation in the 'docs' folder for more\ninformation on using the code processor as a library).\n\n## Quickstart\n\n### Install the code processor using NPM\n\n```\n[sudo] npm install -g titanium-code-processor\n```\nThe code processor relies on the new [Titanium CLI](https://github.com/appcelerator/titanium),\nso if you haven't installed it already, do so before running the code processor.\n\n### Run the code processor\n\nFrom within your project directory, run:\n```\ntitanium-code-processor analyze -o <platform>\n```\n\n## Running using the standalone bin script\n\n```\ntitanium-code-processor [sub-command] [options]\n```\nSub-commands\n* options - Queries the options available\n* plugins - Queries the plugins available in the given search paths and default paths\n* analyze - Analyzes a project\n* subprocess - Provides an interactive interface for working with the code processor from another process\n\n### Options sub-commannd\n\n```\ntitanium options\n```\nThis command provides detailed information on all of the options that are available to the code processor. Results are output in JSON format for easy parsing. Option names, valid value types, etc. are included in the results. Each option has the following format:\n\nName | Type | Description\n-----|------|------------\ntypes | Array[type] | The list of possible types allowed by the option\ndescription (optional) | String | A description of the option\nrequired | Boolean | Whether or not this option is required\ndefaultValue (optional) | Any | The devault value\n\nTypes have the following properties:\n\nName | Type | Description\n-----|------|------------\ntype | String | One of 'null', 'boolean', 'number', 'string', 'object', or 'array'\nsubType | type | Only for type of 'array', this is the type of the array elements\nproperties | Object | Only for type of 'object', the properties of the object, with each key being the property name, and the value an option as defined above\nallowedValues (optional) | Array[Primitive] | Only for primitive types, a list of allowed values\ndescription (optional) | String | A description of this type\n\nAs an example:\n\n```JSON\n{\n\t\"myOption\": {\n\t\t\"types\": [{\n\t\t\t\"type\": \"string\"\n\t\t}],\n\t\t\"required\": false,\n\t\t\"description\": \"I am an option\",\n\t\t\"defaultValue\": \"hi\"\n\t}\n}\n```\n\n### Plugins sub-command\n\n```\ntitanium plugins [&lt;search path 1&gt; [&lt;search path 2&gt; [...]]]\n```\nThis command provides detailed information all plugins found in the default search path (&lt;code processor dir&gt;/plugins) and in the search paths provided (if any) in JSON format for easy parsing. The path to the plugin, options the plugin takes, etc. are included in the results. Each plugin has the following structure:\n\nName | Type | Description\n-----|------|------------\npath | String | The path to the plugin\ndependencies | Array[String] | The plugin dependencies, with each entry being the plugin name\noptions | Object | The options for the plugin, following the same format as the global options above (if there are no options, the object exists but is empty)\n\n### Analyze sub-command\n\nAnalyzes a project.\n\nList of options\n\nOption | Description\n-------|------------\n--plugin, -p &lt;plugin name&gt; | Specifies a plugin to load. The -p flag expects the name of a single plugin, e.g. ```-p analysis-coverage```\n--config, -c &lt;option=value&gt; | Specifies a configuration option and it's value, e.g ```-c invokeMethods=false```\n--log-level, -l | Sets the log level. Possible values are 'error', 'warn', 'notice', 'info', 'debug', or 'trace'\n--osname, -o | The name of the OS being analyzed for. This is the value that will be reported via 'Ti.Platform.osname', e.g. 'android'. This flag is **required**\n--project-dir, -d | The directory of the project to load. If not specified, defaults to the current directory\n--config-file, -f | The path to the config file. Note: when this flag is specified, all other flags are ignored and tiapp.xml is not parsed\n--results-dir, -r | The path to the directory that will contain the results\n--all-plugins, -a | Loads all plugins in the default search path\n--non-ti-plugins, -t | Loads all non-titanium specific plugins in the default search path\n\n### Subprocess sub-command\n\nThe subprocess sub-command can be used to sub-process the code processor. Input and output is handled via stdin and stdout using a structured streaming format.\n\n### Config file example\n\n```JSON\n{\n\t\"entryPoint\": \"path/to/app.js\",\n\t\"logging\": {\n\t\t\"console\": {\n\t\t\t\"level\": \"info\"\n\t\t},\n\t\t\"file\": {\n\t\t\t\"level\": \"debug\",\n\t\t\t\"path\": \"path/to/log\"\n\t\t}\n\t},\n\t\"options\": {\n\t\t\"processUnvisitedCode\":true,\n\t\t\"maxRecursionLimit\":500\n\t},\n\t\"resultsPath\": \"path/to/results/directory\"\n\t\"plugins\": [\n\t\t{\n\t\t\t\"name\": \"common-globals\",\n\t\t\t\"path\": \"path/to/common-globals\",\n\t\t\t\"options\": {}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"require-provider\",\n\t\t\t\"path\": \"path/to/require-provider\",\n\t\t\t\"options\": {\n\t\t\t\t\"platform\": \"iphone\",\n\t\t\t\t\"modules\": []\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ti-api-processor\",\n\t\t\t\"path\": \"path/to/ti-api-processor\",\n\t\t\t\"options\": {\n\t\t\t\t\"platform\": \"iphone\",\n\t\t\t\t\"sdkPath\": \"path/to/sdk\",\n\t\t\t\t\"values\": {\n\t\t\t\t\t\"Titanium.Platform.version\": \"3.1.0\"\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ti-api-usage-finder\",\n\t\t\t\"path\": \"path/to/ti-api-usage-finder\",\n\t\t\t\"options\": {}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"ti-api-platform-validator\": {\n\t\t\t\"path\": \"path/to/ti-api-platform-validator\",\n\t\t\t\"options\": {\n\t\t\t\t\"platform\": \"iphone\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"unknown-ambiguous-visualizer\",\n\t\t\t\"path\": \"path/to/unknown-ambiguous-visualizer\",\n\t\t\t\"options\": {\n\t\t\t\t\"outputDirectory\": \"path/to/output/dir\",\n\t\t\t\t\"timestampOutputDirectory\": false\n\t\t\t}\n\t\t}\n\t]\n}\n```\n\n## Running as part of the Titanium CLI\n\n**Note:** This information is outdated and will only work with the version 0.1.x, the code processor that shipped with SDK 3.0\n\nThe code processor is integrated as a build step in the CLI. To enable it, add\nthe following to your tiapp.xml:\n```xml\n<code-processor>\n\t<enabled>true</enabled>\n</code-processor>\n```\nOptions and plugins can also be specified in the tiapp.xml, as the following\nexample shows:\n```xml\n<code-processor>\n\t<enabled>true</enabled>\n\t<options>\n\t\t<nativeExceptionRecovery>true</nativeExceptionRecovery>\n\t\t<invokeMethods>false</invokeMethods>\n\t</options>\n\t<plugins>\n\t\t<plugin>analysis-coverage</plugin>\n\t\t<plugin>require-provider</plugin>\n\t</plugins>\n</code-processor>\n```\n\n### Runtime Options\n\nThese options can be set at the command line by using the '-c' flag from the code\nprocessor command, or by setting the option in the tiapp.xml file if using the\nTitanium CLI.\n\nname | type | default | description\n-----|------|---------|------------\ninvokeMethods | boolean | true | Indicates whether or not to invoke methods. If set to false, the method is evaluated once in ambiguous context mode.\nevaluateLoops | boolean | true | Indicates whether or not to evaluate loops. If set to false, the loop body and any loop conditionals are evaluated once in ambiguous block mode.\nmaxLoopIterations | integer | 1000000000000 | The maximum number of iterations of a loop to evaluate. If this threshold is exceeded, the block is evaluated once in ambiguous block mode. Note: this threshold makes it impossible to analyze infinite loops.\nmaxRecursionLimit | integer | 1000 | The maximum function call depth to evaluate, similar to a stack size limit. If this threshold is exceeded, function bodies are not evaluated and unknown is returned. Note: this threshold makes it impossible to analyze infinite recursion.\nlogConsoleCalls | boolean | true | If enabled, all console.* calls in a user's code are logged to the terminal using the appropriate log level.\nexecutionTimeLimit | integer | undefined | The maximum time to execute the code before throwing an exception. If not defined, the code processor will run as long as it takes to complete the analysis.\nexactMode | boolean | false | Enables exact mode and causes the code processor act exactly like a standard JavaScript interpreter. Intended primarily for unit testing and is not recommended for project .analysis\nnativeExceptionRecovery | boolean | false | When enabled, the code processor will recover from many types of native exceptions and continue analysis. Enabling this has the potential of generating incorrect results, but can be used to parse code that normally wouldn't be parsed because of an error.\n\n## Built-in Plugins\n\nPlugins are informally grouped into two types: analyzers and providers. Providers\nprovide some sort of feature in the runtime that is not included in the ECMAScript\nspecification, such as the Titanium Mobile API. Providers do not report any\nresults. Analyzers do not provide any features in the runtime but instead analyze\ncode and do report results. Many analyzers depend on providers to work. All of the\ncurrent plugins are listed below, along with their type and if they have any other\ndependencies\n\nname | type | dependencies | description\n-----|------|--------------|------------\nanalysis-coverage | analyzer | &lt;none&gt; | Reports the number of AST nodes that were analyzed on a global and per-file/eval basis.\ncommon-globals | provider | &lt;none&gt; | Provides implementations for common globals that aren't part of the JavaScript spec but are provided on all Titanium Mobile platforms (setTimeout, console, etc).\nrequire-finder | analyzer | require-provider | Reports all files that are ```require()```'d in a project.\nrequire-provider | provider | &lt;none&gt; | Provides an implementation of ```require()``` that matches the Titanium Mobile implementation, including its inconsistencies with CommonJS.\nti-api-deprecation-finder | analyzer | ti-api-processor | Reports all deprecated APIs used by the project.\nti-api-platform-validator | analyer | ti-api-processor | Reports all instances where a platform specific feature is used on the wrong platform, e.g. calling ```Ti.Android.createIntent``` on iOS.\nti-api-processor | provider | &lt;none&gt; | Provides an implementation of the Titanium Mobile API. This implementation reads the API documentation for the SDK used by the project to create the API implementation. As such, the SDK specified in the project's tiapp.xml file *must* be installed.\nti-api-usage-finder | analyzer | ti-api-processor | Reports all Titanium Mobile APIs used by the project.\nti-api-include-finder | analyzer | ti-api-processor | Reports all files that are ```Ti.include()```'d by the project.\n\n## Internal Concepts\n\nAt the core of the code processor is an ECMAScript 5 interpreter that has been\nspecially designed to work offline. To make this work, two new concepts have\nbeen introduced: an 'unknown' data type and 'ambiguous modes.'\n\nThe unknown data type is pretty self-explanatory; it's a value that we don't know\nthe value of. For example, if the following code is run:\n```JavaScript\nvar x = Date.now();\n```\nx will be set to unknown since the date changes from run to run and isn't known\nat compile time. Operations on unknown values always produce unknown values. For\nexample, y evaluates to unknown in all of the following circumstances:\n```JavaScript\nvar x = Date.now(),\n\ty;\ny = x + 20;\ny = x > 100;\ny = x.foo();\ny = x.toString();\ny = typeof x;\n```\nAmbiguous modes occur when we are evaluating code without knowing exactly how\nit is invoked. There are two types of ambiguous mode: ambiguous context mode and\nambiguous block mode.\n\nAn ambiguous context is a function or module that is invoked\nwithout knowing exactly how it was invoked. All callbacks passed to the Titanium\nAPI are evaluated as ambiguous contexts, and any functions called from an ambiguous\nblock is called as an ambiguous context. In the following example, y is set to\nunknown:\n```JavaScript\nvar y;\nsetTimeout(function () {\n\ty = 20;\n}, 10)\n```\n\nAn ambiguous block is a loop/conditional body that is evaluated without knowing\nthe exact circumstances it is evaluated in. If statements and while/do-while\nloops are evaluated as an ambiguous block if the conditional is unknown. For and\nfor-in loops are evaluated as an ambiguous block if some part of the iteration\nconditions are unknown. All assignments in an ambiguous block evaluate to unknown\nand all functions called from an ambiguous block are evaluated in an ambiguous\ncontext. In the following example, y is set to unknown:\n```JavaScript\nvar x = Date.now(),\n\ty;\nif (x) {\n\ty = 10;\n} else {\n\ty = 20;\n}\n```\n\n#### (C) Copyright 2012-2013, [Appcelerator](http://www.appcelerator.com) Inc. All Rights Reserved.",
  "readmeFilename": "README.md",
  "_id": "titanium-code-processor@0.3.2",
  "_from": "titanium-code-processor@0.3.x"
}
